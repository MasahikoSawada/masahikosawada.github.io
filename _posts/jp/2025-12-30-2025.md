---
layout: post
title: 2025年振り返り
lang: jp
tags:
  - Diary
---

# PostgreSQL

2025年9月にリリースされたPostgreSQL 18も、現在開発中のPostgreSQL 19もLogical Replication関連の開発がメインだった。自分が開発した機能では、`wal_level`の`replica`と`logical`を再起動なしで自動的に切り替えるようになる機能の開発に一番時間を割いたと思う([67c20979ce7](https://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=67c20979ce7))。他にも、`update_deleted`コンフリクトを確実に検出するための機能([228c3708685](https://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=228c3708685))や、Logical Replicationにシーケンスを対応させる機能([5509055d695](https://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=5509055d695)、[f0b3573c3aa](https://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=f0b3573c3aa)、[96b37849734](https://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=96b37849734))はレビュアーとして参画した。

あとは、CPUアーキテクチャによって`char`の符号が異なることが原因でGINインデックスのスキャン結果が変わってしまう問題を直せたのも良かったし([dfd8e6c73ee](https://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=dfd8e6c73ee), [1aab6805919](https://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=1aab6805919), [a8238f87f98](https://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=a8238f87f98), [30666d1857d](https://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=30666d1857d), [44fe30fdab6](https://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=44fe30fdab6))、CVEのバグ修正のレビューに参加できたのも良い経験となった[627acc3caa7](https://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=627acc3caa7)。

2025年では62件コミットできたようだ:

```bash
$ git log --author "Masahiko Sawada" --since=2025-01-01 --oneline | wc -l
62
```

来年は100件以上を目指そう。

# PGConf.dev 2025

PGConf.dev 2025では「The Present and Future of VACUUM of PostgreSQL」という発表をした([スライド](https://www.pgevents.ca/events/pgconfdev2025/sessions/session/281/slides/85/The_Present_and_Future_of_Vacuum_in_PostgreSQL.pdf)、[動画](https://www.youtube.com/watch?v=kRMQlz7JW4U))。また、Advanced Patch Feedback Sessionというセッションにも参加して、対面でパッチについて議論しながら、開発が先に進めるようにコミッタ視点でアドバイスをする、ということもしてきた。その他にも、Code Of Conduct Committeeのメンバに入れてもらえたり、Lightning Talksの運営をやったりと、運営側としても参加できたカンファレンスだった。

# メンター

PostgreSQLコミュニティでは、[hacker mentoring program](https://www.postgresql.org/message-id/CA+TgmoZfS_rYU_OjOFFxhbqNS5FyoX5dv1MU7-qE_SoxRzfWLw@mail.gmail.com)というのがあり、PostgreSQL Committerが希望者に付いて一緒に開発したりアドバイスをする取り組みがある。今年は自分もCommitterとして参加して、1人メンティーを持つことになった。

また、PostgreSQLの開発に興味があるけどやり方が分からなず参加できない、という人のために個人的になにかできることはないかと考えXで募集してみた。

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">PostgreSQLのLogical Replicationの改善に興味がある人いないかな。簡単なバックログもあるので未経験でもアドバイスしながら一緒にPostgreSQL開発を経験できます。</p>&mdash; Masahiko Sawada (@masahiko_sawada) <a href="https://twitter.com/masahiko_sawada/status/1978179819020972219?ref_src=twsrc%5Etfw">October 14, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

すると、9人も興味を示していただき、1人1時間ほどのハンズオンを通して、PostgreSQL開発コミュニティの事やソースコードの構成など説明したり、私の方で用意したパッチネタについて議論するなどをした。参加いただいた方々の満足度はわからないが、そのハンズオン以降、2名の方がめでたくPostgreSQL Contributorとなった(リリースノートに名前が載ります)。その後、日本以外の方からも連絡ももらったりしたのですが、中々自分の時間が取れず、現在は一旦休止しています。

# Rust

Rustの勉強を始めた。並行してRust製のOSSを使うことも始めたいな色々と探していたらRust製でbash/POSIX互換を謳っている[brush](https://github.com/reubeno/brush)という良さげなシェルがあったので、これを使い始めた。Tab補完周りでバグを見つけたのでIssueと[PR](https://github.com/reubeno/brush/pull/870)を出したらめでたくMergeしてもらい、Rust製OSSへのContributionを経験できた。他にもいくつか見つけた問題があるのでこれからもContributionを続けていきたい。

あとは、Rustのコンパイラ自体(rustc)にも興味があり、ソースコードや関連する資料を見始めた。

# UT Austin MSCS

2025年9月からテキサス大学(UT Austin)のCS修士課程(オンライン)を始めてみました。オンラインCS修士課程だと一番有名なのはジョージア工科大学のOMSCSですが、UT Austinでも比較的低価格で受けることができます。CS修士課程ではあるのですが、どちらからというと理論や数学系の勉強をしたかったのでUT Austinのコースを取りました。実際やってみると体力的に1学期1授業が限界な感じ。

# アメリカでの生活

2024年からアメリカに住み始めたので今年は(一時帰国した7月を除くと)ほぼ1年丸々アメリカにいたことになります。仕事的には渡米前と一緒なので良くも悪くも変化はなかった。チームメンバや開発チームとタイムゾーンが一緒になれたのは一番良かったことの一つかもしれない。突然やってくるレイオフやたまにニュースで見る危ない事件などに怯えることもありますが、キャンプやったりバーベキューやったりしてなんだかんだ楽しくやっています。来年にH1-Bに切り替えられるのでちょっとは安心かも（それまでにレイオフに合わなければ）。

# まとめ

Logical Replication周りはまだまだ改善点が多いので引き続き開発していきます。

